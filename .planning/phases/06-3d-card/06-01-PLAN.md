---
phase: 06-3d-card
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - components/three/card/card-model.tsx
autonomous: true

must_haves:
  truths:
    - "Card uses RoundedBox geometry with rounded corners"
    - "Card has metallic material with holographic iridescence"
    - "Card reflects environment lighting"
  artifacts:
    - path: "components/three/card/card-model.tsx"
      provides: "CardModel component with premium materials"
      exports: ["CardModel"]
    - path: "package.json"
      provides: "maath dependency"
      contains: "maath"
  key_links:
    - from: "components/three/card/card-model.tsx"
      to: "@react-three/drei"
      via: "RoundedBox import"
      pattern: "import.*RoundedBox.*drei"
---

<objective>
Install maath for frame-rate-independent easing and create the CardModel component with premium metallic materials and holographic shimmer.

Purpose: Establish the visual foundation of the 3D card - the geometry shape and premium material appearance that makes it look like a high-end credit card.

Output: maath installed, CardModel component with RoundedBox geometry and MeshPhysicalMaterial with iridescence.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-3d-card/06-RESEARCH.md

# Existing infrastructure to build on
@components/three/scene.tsx
@components/hero/hero-card-3d.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install maath dependency</name>
  <files>package.json, package-lock.json</files>
  <action>
Install maath for frame-rate-independent easing functions:

```bash
npm install maath
```

This provides `easing.dampE` which we'll use in plan 06-02 for smooth cursor-following rotation. maath is from the pmndrs ecosystem and integrates well with R3F.

Expected version: ^0.10.8
  </action>
  <verify>
Run `npm ls maath` - should show maath installed.
Run `npm run build` - build should succeed.
  </verify>
  <done>maath appears in package.json dependencies and build passes</done>
</task>

<task type="auto">
  <name>Task 2: Create CardModel component with premium materials</name>
  <files>components/three/card/card-model.tsx</files>
  <action>
Create the card/card-model.tsx file with:

1. **'use client' directive** - Required for R3F components

2. **RoundedBox geometry from drei:**
   - args: [3.375, 2.125, 0.05] (credit card proportions from Phase 5)
   - radius: 0.12 (rounded corners)
   - smoothness: 4 (curve detail)

3. **MeshPhysicalMaterial with premium metallic appearance:**
   - color: "#0f0f23" (dark base)
   - metalness: 0.95 (high for reflections)
   - roughness: 0.05 (low for glossy look)
   - clearcoat: 1.0 (extra shine layer)
   - clearcoatRoughness: 0.1
   - iridescence: 0.7 (holographic shimmer - not too gaudy)
   - iridescenceIOR: 1.5 (index of refraction)
   - iridescenceThicknessRange: [100, 400] (color variation)
   - envMapIntensity: 1.2 (boost reflections)

4. **Export named CardModel component** - Takes no props, pure presentational

Reference the research for exact material values. The iridescence property creates the holographic shimmer effect that shifts colors based on viewing angle.

IMPORTANT: This is just the visual model. Rotation/interactivity comes in plan 06-02.
  </action>
  <verify>
File exists at components/three/card/card-model.tsx.
Contains 'use client' directive.
Imports RoundedBox from @react-three/drei.
Uses meshPhysicalMaterial (not meshStandardMaterial).
Has iridescence property set.
Run `npm run build` - should compile without errors.
  </verify>
  <done>CardModel component exists with RoundedBox geometry and MeshPhysicalMaterial with iridescence properties</done>
</task>

</tasks>

<verification>
1. `npm ls maath` shows maath installed
2. `npm run build` succeeds
3. CardModel file exists with correct structure
4. TypeScript compilation passes
</verification>

<success_criteria>
- maath ^0.10.8 in package.json dependencies
- components/three/card/card-model.tsx exports CardModel
- CardModel uses RoundedBox with credit card dimensions
- Material has metalness, clearcoat, and iridescence properties
- Build passes without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-3d-card/06-01-SUMMARY.md`
</output>
