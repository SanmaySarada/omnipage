---
phase: 09-interactive-features
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/accordion.tsx
  - components/faq/faq-accordion.tsx
  - components/faq/faq-section.tsx
  - components/faq/faq-data.ts
  - components/faq/index.ts
  - components/security/security-accordion.tsx
  - components/security/index.ts
autonomous: true

must_haves:
  truths:
    - "User can expand/collapse FAQ accordion items"
    - "User sees smooth height animation when expanding/collapsing"
    - "User can navigate FAQ items with keyboard"
    - "User sees all 5 FAQ questions from requirements"
    - "User can expand security section to see compliance details"
  artifacts:
    - path: "components/ui/accordion.tsx"
      provides: "shadcn Accordion component with Radix accessibility"
    - path: "components/faq/faq-accordion.tsx"
      provides: "Custom accordion with Framer Motion height animation"
      exports: ["FAQAccordion"]
    - path: "components/faq/faq-section.tsx"
      provides: "FAQ section wrapper with heading"
      exports: ["FAQSection"]
    - path: "components/faq/faq-data.ts"
      provides: "FAQ content data"
      exports: ["faqItems"]
    - path: "components/security/security-accordion.tsx"
      provides: "Expandable security details"
      exports: ["SecurityAccordion"]
  key_links:
    - from: "faq-section.tsx"
      to: "faq-accordion.tsx"
      via: "composition"
      pattern: "<FAQAccordion"
    - from: "faq-accordion.tsx"
      to: "motion/react"
      via: "AnimatePresence height animation"
      pattern: "AnimatePresence.*height.*auto"
    - from: "faq-accordion.tsx"
      to: "faq-data.ts"
      via: "data import"
      pattern: "import.*faqItems.*from.*faq-data"
---

<objective>
Create the FAQ section with animated accordion and security details accordion for TRUST-02.

Purpose: FAQ-01 and FAQ-02 address common user questions, building trust and reducing friction. TRUST-02 provides security transparency.
Output: Working FAQ section with smooth height animations and expandable security details.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-interactive-features/09-RESEARCH.md

Key existing patterns to follow:
@lib/animation-variants.ts (slideUpVariants, ScrollReveal pattern)
@components/content-sections/feature-grid/feature-grid.tsx (section structure pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn Accordion and create FAQ data</name>
  <files>
    components/ui/accordion.tsx
    components/faq/faq-data.ts
  </files>
  <action>
1. Install shadcn Accordion component:
   ```bash
   npx shadcn@latest add accordion
   ```

2. Create `components/faq/faq-data.ts` with FAQ content:
   ```typescript
   export interface FAQItem {
     id: string
     question: string
     answer: string
   }

   export const faqItems: FAQItem[] = [
     {
       id: 'how-omni-makes-money',
       question: 'How does Omni make money?',
       answer: 'Omni earns a small commission from partner merchants when you shop at their locations. This allows us to offer rewards at no cost to students or schools.',
     },
     {
       id: 'school-integration',
       question: 'How does school integration work?',
       answer: 'Schools connect their payment systems to Omni, allowing tuition payments to automatically earn rewards. The process is seamless for students and parentsâ€”you\'ll see rewards accumulate in real-time.',
     },
     {
       id: 'supported-cards',
       question: 'What payment methods are supported?',
       answer: 'Omni works with major credit and debit cards, ACH transfers, and direct bank payments. Check with your school for specific payment options available.',
     },
     {
       id: 'data-safety',
       question: 'Is my data safe?',
       answer: 'Absolutely. We use bank-level 256-bit encryption and never store sensitive payment information on our servers. We\'re SOC 2 compliant and follow strict data protection standards.',
     },
     {
       id: 'how-rewards-work',
       question: 'How do rewards work?',
       answer: 'Earn points on tuition payments (up to 1% back) and everyday purchases at partner merchants (3x-10x points). Points convert to statement credits or direct tuition payments at a rate of 100 points = $1.',
     },
   ]
   ```
  </action>
  <verify>
    - `ls components/ui/accordion.tsx` exists
    - `ls components/faq/faq-data.ts` exists
    - `npx tsc --noEmit` passes
  </verify>
  <done>
    - shadcn Accordion installed
    - FAQ data defined with all 5 required questions
  </done>
</task>

<task type="auto">
  <name>Task 2: Create FAQAccordion with Framer Motion height animation</name>
  <files>
    components/faq/faq-accordion.tsx
    components/faq/faq-section.tsx
    components/faq/index.ts
  </files>
  <action>
1. Create `components/faq/faq-accordion.tsx`:
   - 'use client' directive (has state and animations)
   - Import: `useState` from react
   - Import: `motion, AnimatePresence` from 'motion/react'
   - Import: `ChevronDown` from 'lucide-react'
   - Import: `FAQItem, faqItems` from './faq-data'

   Pattern (from research):
   ```typescript
   const [openId, setOpenId] = useState<string | null>(null)

   // For each item:
   <div key={item.id} className="border-b border-border last:border-b-0">
     <button
       onClick={() => setOpenId(isOpen ? null : item.id)}
       aria-expanded={isOpen}
       aria-controls={`faq-content-${item.id}`}
       className="flex w-full items-center justify-between py-5 px-1 text-left font-medium transition-colors hover:text-primary"
     >
       <span className="pr-4">{item.question}</span>
       <motion.span
         animate={{ rotate: isOpen ? 180 : 0 }}
         transition={{ duration: 0.2 }}
       >
         <ChevronDown className="size-5 text-muted-foreground shrink-0" aria-hidden />
       </motion.span>
     </button>
     <AnimatePresence initial={false}>
       {isOpen && (
         <motion.div
           id={`faq-content-${item.id}`}
           initial={{ height: 0, opacity: 0 }}
           animate={{ height: 'auto', opacity: 1 }}
           exit={{ height: 0, opacity: 0 }}
           transition={{ duration: 0.3, ease: [0.04, 0.62, 0.23, 0.98] }}
           className="overflow-hidden"
         >
           <div className="pb-5 px-1 text-muted-foreground leading-relaxed">
             {item.answer}
           </div>
         </motion.div>
       )}
     </AnimatePresence>
   </div>
   ```

   - Wrap all items in: `<div className="divide-y divide-border rounded-xl border bg-card">`
   - CRITICAL: Use `overflow-hidden` on motion.div to prevent height flash

2. Create `components/faq/faq-section.tsx`:
   - Import ScrollReveal from '@/components/ui/scroll-reveal'
   - Import FAQAccordion
   - Section structure:
     ```typescript
     <section id="faq" className="max-w-3xl mx-auto px-4 py-20 sm:py-24">
       <ScrollReveal className="text-center mb-12">
         <h2 className="font-display text-3xl sm:text-4xl font-bold mb-4">
           Frequently Asked Questions
         </h2>
         <p className="text-muted-foreground text-lg">
           Everything you need to know about Omni
         </p>
       </ScrollReveal>

       <FAQAccordion />
     </section>
     ```

3. Create `components/faq/index.ts` barrel export:
   ```typescript
   export { FAQSection } from './faq-section'
   export { FAQAccordion } from './faq-accordion'
   ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - FAQAccordion uses AnimatePresence with height: 'auto'
    - Button elements used for triggers (accessibility)
    - aria-expanded and aria-controls present
  </verify>
  <done>
    - FAQAccordion renders with smooth height animation
    - FAQSection provides section wrapper with heading
    - All 5 FAQ items display correctly
    - Keyboard accessible (button triggers)
  </done>
</task>

<task type="auto">
  <name>Task 3: Create SecurityAccordion for TRUST-02</name>
  <files>
    components/security/security-accordion.tsx
    components/security/index.ts
  </files>
  <action>
1. Create `components/security/security-accordion.tsx`:
   - 'use client' directive
   - Import: `useState` from react
   - Import: `motion, AnimatePresence` from 'motion/react'
   - Import: `ChevronDown, Shield, Lock, Server, CheckCircle` from 'lucide-react'

   Structure:
   - Collapsible section with header "Bank-Level Security"
   - Shield icon next to header
   - When expanded, shows compliance details:
     - SOC 2 Type II Compliant
     - 256-bit AES Encryption
     - PCI DSS Level 1
     - GDPR Compliant
   - Each detail has icon + title + brief description
   - Same AnimatePresence pattern as FAQ for height animation

   ```typescript
   const securityItems = [
     {
       icon: CheckCircle,
       title: 'SOC 2 Type II Compliant',
       description: 'Independently audited security controls',
     },
     {
       icon: Lock,
       title: '256-bit AES Encryption',
       description: 'Bank-level data protection',
     },
     {
       icon: Server,
       title: 'PCI DSS Level 1',
       description: 'Highest payment security standard',
     },
     {
       icon: Shield,
       title: 'GDPR Compliant',
       description: 'Full data privacy protection',
     },
   ]
   ```

   - Default state: collapsed
   - Click header to expand/collapse
   - Expanded shows 2x2 grid of security badges
   - Card styling: bg-card border rounded-xl

2. Create `components/security/index.ts` barrel export:
   ```typescript
   export { SecurityAccordion } from './security-accordion'
   ```

3. Note: SecurityAccordion will be placed in the FAQ section below the FAQ accordion during page integration (Plan 3)
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - SecurityAccordion expands/collapses with animation
    - All 4 security badges render when expanded
    - Keyboard accessible
  </verify>
  <done>
    - SecurityAccordion provides expandable security details
    - TRUST-02 requirement addressed
    - Same animation pattern as FAQ for consistency
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` passes without errors
2. `npx tsc --noEmit` passes
3. FAQ and Security components ready for page integration (Plan 3)
4. FAQ-01, FAQ-02, TRUST-02 requirements addressed
</verification>

<success_criteria>
- User can expand/collapse FAQ accordion items with smooth height animation
- User sees all 5 required FAQ questions with answers
- User can navigate FAQ with keyboard (tab, enter/space to toggle)
- User can expand security section to see compliance badges
- Animations are smooth without height flash
</success_criteria>

<output>
After completion, create `.planning/phases/09-interactive-features/09-02-SUMMARY.md`
</output>
