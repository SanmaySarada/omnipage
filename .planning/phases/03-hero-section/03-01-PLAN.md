---
phase: 03-hero-section
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/input.tsx
  - app/globals.css
  - lib/animation-variants.ts
  - components/hero/email-capture.tsx
autonomous: true

must_haves:
  truths:
    - "User can enter email in input field"
    - "User sees validation feedback after blurring invalid email"
    - "User sees green border on valid email"
    - "Gradient mesh CSS animation exists and respects reduced-motion"
  artifacts:
    - path: "components/ui/input.tsx"
      provides: "shadcn Input component"
    - path: "components/hero/email-capture.tsx"
      provides: "EmailCapture form with micro-validation"
      exports: ["EmailCapture"]
    - path: "lib/animation-variants.ts"
      provides: "Hero animation variants"
      contains: "heroContainerVariants"
    - path: "app/globals.css"
      provides: "Gradient mesh animation"
      contains: "hero-gradient"
  key_links:
    - from: "components/hero/email-capture.tsx"
      to: "components/ui/input.tsx"
      via: "import { Input }"
      pattern: "import.*Input.*from.*ui/input"
---

<objective>
Add shadcn Input component, gradient mesh CSS animation, hero animation variants, and email capture form with micro-validation.

Purpose: Establish the foundational pieces (Input component, CSS animations, variants) that the hero section builds upon, and create the email capture form - the primary conversion point.

Output:
- `components/ui/input.tsx` - shadcn Input component
- `app/globals.css` - Extended with gradient mesh animation
- `lib/animation-variants.ts` - Extended with hero variants
- `components/hero/email-capture.tsx` - Email form with validation
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-hero-section/03-RESEARCH.md

# Existing files to modify
@app/globals.css
@lib/animation-variants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add shadcn Input and gradient mesh CSS</name>
  <files>
    components/ui/input.tsx
    app/globals.css
    lib/animation-variants.ts
  </files>
  <action>
1. Install shadcn Input component:
   ```bash
   npx shadcn@latest add input
   ```

2. Add gradient mesh animation to `app/globals.css` (before the @layer base block):
   ```css
   /* Hero gradient mesh - slow drift animation */
   .hero-gradient {
     position: absolute;
     inset: 0;
     z-index: -1;
     background: linear-gradient(
       -45deg,
       oklch(0.95 0.03 280),
       oklch(0.97 0.02 240),
       oklch(0.98 0.015 260),
       oklch(0.96 0.025 220)
     );
     background-size: 400% 400%;
     animation: gradient-drift 30s ease infinite;
   }

   @keyframes gradient-drift {
     0%, 100% { background-position: 0% 50%; }
     50% { background-position: 100% 50%; }
   }

   /* Respect reduced motion for CSS animations */
   @media (prefers-reduced-motion: reduce) {
     .hero-gradient {
       animation: none;
       background-size: 100% 100%;
     }
   }
   ```

3. Extend `lib/animation-variants.ts` with hero variants:
   ```typescript
   // Hero staggered animation variants
   export const heroContainerVariants = {
     hidden: { opacity: 1 },
     visible: {
       opacity: 1,
       transition: {
         staggerChildren: 0.15,
         delayChildren: 0.3,
       },
     },
   }

   export const heroItemVariants = {
     hidden: { opacity: 0, y: 20 },
     visible: {
       opacity: 1,
       y: 0,
       transition: {
         duration: 0.5,
         ease: 'easeOut',
       },
     },
   }

   // Metric card hover variants
   export const cardHoverVariants = {
     rest: { y: 0 },
     hover: { y: -5 },
   }

   export const cardTransition = {
     duration: 0.2,
     ease: 'easeOut' as const,
   }
   ```
  </action>
  <verify>
    - `ls components/ui/input.tsx` confirms Input component exists
    - `grep "hero-gradient" app/globals.css` finds the gradient class
    - `grep "heroContainerVariants" lib/animation-variants.ts` finds hero variants
  </verify>
  <done>
    - shadcn Input component installed at components/ui/input.tsx
    - Gradient mesh CSS with 30s drift animation and reduced-motion fallback in globals.css
    - Hero animation variants (container, item, card hover) in animation-variants.ts
  </done>
</task>

<task type="auto">
  <name>Task 2: Create EmailCapture component with micro-validation</name>
  <files>
    components/hero/email-capture.tsx
  </files>
  <action>
Create `components/hero/email-capture.tsx`:

```typescript
'use client'

import { useState } from 'react'
import { motion } from 'motion/react'
import { Input } from '@/components/ui/input'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'

type ValidationStatus = 'idle' | 'invalid' | 'valid'

export function EmailCapture() {
  const [email, setEmail] = useState('')
  const [touched, setTouched] = useState(false)
  const [status, setStatus] = useState<ValidationStatus>('idle')

  const validate = (value: string): ValidationStatus => {
    if (!value) return 'idle'
    const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)
    return isValid ? 'valid' : 'invalid'
  }

  const handleBlur = () => {
    setTouched(true)
    setStatus(validate(email))
  }

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value
    setEmail(value)
    if (touched) {
      setStatus(validate(value))
    }
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    const validationResult = validate(email)
    setStatus(validationResult)
    setTouched(true)

    if (validationResult === 'valid') {
      // TODO: Submit to waitlist API in Phase 10
      console.log('Submitting email:', email)
    }
  }

  return (
    <form onSubmit={handleSubmit} className="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
      <div className="flex-1 relative">
        <Input
          type="email"
          placeholder="Enter your email"
          value={email}
          onChange={handleChange}
          onBlur={handleBlur}
          required
          aria-describedby={status === 'invalid' && touched ? 'email-error' : undefined}
          className={cn(
            'h-12',
            status === 'invalid' && touched && 'border-destructive focus-visible:ring-destructive',
            status === 'valid' && 'border-green-500 focus-visible:ring-green-500'
          )}
        />
        {status === 'invalid' && touched && (
          <motion.p
            id="email-error"
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            className="text-destructive text-sm mt-1 absolute"
          >
            Please enter a valid email
          </motion.p>
        )}
      </div>
      <Button type="submit" size="lg" className="h-12 px-8">
        Join Waitlist
      </Button>
    </form>
  )
}
```

Key implementation details:
- Uses 'use client' directive for client-side interactivity
- Validation only shows after user has interacted (touched state)
- Green border for valid, destructive border for invalid
- Error message animates in with Motion
- Accessible: aria-describedby links input to error message
- Mobile-responsive: stacks vertically on small screens
- h-12 for consistent height with button
- TODO placeholder for actual API submission (Phase 10)
  </action>
  <verify>
    - `ls components/hero/email-capture.tsx` confirms file exists
    - `grep "use client" components/hero/email-capture.tsx` confirms client component
    - `grep "validate" components/hero/email-capture.tsx` confirms validation logic
    - `grep "aria-describedby" components/hero/email-capture.tsx` confirms accessibility
  </verify>
  <done>
    - EmailCapture component created with micro-validation feedback
    - Shows validation state (idle/valid/invalid) with appropriate styling
    - Error message animates in only after user interaction (blur)
    - Accessible with aria-describedby for screen readers
    - Mobile-responsive layout (stacks on small screens)
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npm run build` completes without errors
2. `npm run dev` starts successfully
3. Input component renders with correct styling
4. Gradient mesh CSS is in globals.css with reduced-motion support
5. Hero animation variants are exported from animation-variants.ts
6. EmailCapture component exists and exports correctly
</verification>

<success_criteria>
- shadcn Input component is installed and available
- Gradient mesh CSS animation works with 30s slow drift
- prefers-reduced-motion media query disables gradient animation
- Hero animation variants are defined for stagger effect
- EmailCapture shows validation feedback on blur
- Valid email shows green border, invalid shows red border
- Error message animates in smoothly
</success_criteria>

<output>
After completion, create `.planning/phases/03-hero-section/03-01-SUMMARY.md`
</output>
